<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Cái tiệm bán táo by Tina House – Giá nhanh (4 bảng)</title>
<link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsSAAALEgHS3X78AAAB40lEQVR4nO2aMW7bQBBFZ0f2D8k0CwSEjDgJw5S0gJqVJgQWkJ5P4A0J4gG5p9aDkG8o3b2pC7h7n2z0u0i9d4v8K5w3zXK0G1p5b5+v1r2b8fjO5uR3w0mF8vQf9cQk5yq4vC6sL3i8Kj8VmlLZ8m7q1B2K1bQ3oWw7Cw4I5U6bJ3V6l3H2m7eyEo6Wb3Tt7JcV3KQkS6G0hU6m0L3X0d2vC2qV9IYh2m5JjG2kq3b6h1dBvV7MgdY4r5cV2l7Vv8pYk3v7YkJm0z1mJ1m3dWyfV3vY0kqYl4lJf3w1g2iWv9A1qWm9Xy0xJmJ7e3m3y0o9m1zYz3g9Wc6C7S6n6VqfRk3u1h8L9nJm3z8x5rOZQX3Sx3y4VwJ7kT7d2CkHPq2Jv0uQG6yq4o5Q8xT1z2aJg1v8b3hQ3+0c6K2m0Cwq3mJb3qO4QGz5qvD8y58S4rVx2z2t3d9Y6e9M1v0cQd9dD3xi1A722bQB67UCvbRuAXjvQa/vGA/Bf2Wl1acRkdtgAAAAASUVORK5CYII=" />

<style>
  :root{
    --brand: #12B7FF;
    --brand-dark: #0B8ED1;
    --border: #d6e6f2;
    --muted: #54647a;
    --text: #0b1220;
    --bg: #FFFFFF;
    --header-bg: #DAF0F7;
    --header-text: #38B6FF;
    --card-titlebar: #E6F7FF;
    --hover: #f6fbff;
    --shadow-card: 0 4px 12px rgba(18,183,255,0.06);
    --ok-bg: #e6ffef;  --ok-text:#007a33;  --ok-border:#b8f5cf;
    --bad-bg:#ffeff0;  --bad-text:#b00020; --bad-border:#ffd0d3;
    --blue-bg:#e6f7ff; --blue-text:#055b8a; --blue-border:#c9eaff;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; color:var(--text); background:var(--bg)}
  .wrap{max-width:1200px; margin:0 auto; padding:14px 16px}

  header{position:sticky; top:0; z-index:10; background:var(--header-bg); color:var(--header-text); border-bottom:1px solid var(--border)}
  .title{font-weight:900; font-size:24px}
  .subtitle-small{font-size:60%; font-weight:600; opacity:.9; margin-left:1.5px; letter-spacing:-.2px; position:relative; top:-.5px}
  .subtitle{font-size:13px; opacity:.9}

  .boards{display:grid; grid-template-columns:1fr; gap:14px; margin-top:10px}
  @media (min-width:900px){ .boards{grid-template-columns:1fr 1fr} }

  .card{background:#fff; border:1.2px solid var(--border); border-radius:14px; overflow:hidden; box-shadow:var(--shadow-card)}
  .card .titlebar{background:var(--card-titlebar); padding:9px 14px; font-weight:800; border-bottom:1px solid var(--border); color:var(--brand-dark)}
  .table-wrap{overflow-x:auto}
  table{width:100%; border-collapse:collapse; font-size:14px; table-layout:fixed}
  th,td{border-bottom:1px solid var(--border); text-align:left; vertical-align:middle}
  th{font-weight:800; padding:9px 6px; white-space:nowrap}
  td{padding:8px 6px; white-space:nowrap}
  td.price{text-align:right; font-variant-numeric:tabular-nums; padding-right:4px}
  td:last-child{text-align:right;}
  tbody tr:hover{background:var(--hover)}
  tbody tr.groupname td{background:#f9fcff; font-weight:900; font-size:15px; color:#082947; padding:8px 6px}

  .pill{display:inline-block; padding:2px 7px; border-radius:999px; font-size:12px; font-weight:700; white-space:nowrap}
  .pill.ok{background:var(--ok-bg); color:var(--ok-text); border:1px solid var(--ok-border)}
  .pill.bad{background:var(--bad-bg); color:var(--bad-text); border:1px solid var(--bad-border)}
  .pill.blue{background:var(--blue-bg); color:var(--blue-text); border:1px solid var(--blue-border)}

  /* Điều chỉnh khoảng cách cột cho gọn hơn */
  th:nth-child(1){width:67%;} /* sản phẩm rộng hơn */
  th:nth-child(2){width:20%; text-align:right;}
  th:nth-child(3){width:13%; text-align:right;}
  td:nth-child(2){text-align:right;}
  td:nth-child(3){text-align:right;}

  @media (max-width:640px){
    table{font-size:13px;}
    th{font-size:12.5px;}
    th,td{padding:6px 3px;}
    td:first-child{white-space:normal; word-break:break-word;}
  }
</style>

<script>
const URL_ALL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vScB3O9RHORztA1jt0R9IU74vKx19WcpMgh_N6eOU2uKcmczj44re7jb7KqF4Acz-gwCIgPNK3THJlF/pub?output=csv";
function parseCSV(t){const r=[];let n=0,e="",a=[],o=!1;for(;n<t.length;){const i=t[n];if(o)if('"'==i)if('"'==t[n+1])e+='"',n++;else o=!1;else e+=i;else if(","==i)a.push(e),e="";else if("\n"==i)a.push(e),r.push(a),a=[],e="";else if('"'==i)o=!0;else e+=i;n++}return e.length||a.length?(a.push(e),r.push(a)):r}
function normalizeHeader(t){return(t||"").toLowerCase().normalize("NFD").replace(/[̀-ͯ]/g,"").replace(/[^a-z0-9]+/g,"_").replace(/^_|_$/g,"")}
function mapHeaderVN(t){const r=normalizeHeader(t),n={danh_muc:"danh_muc",dong_san_pham:"dong_san_pham",ten_san_pham:"ten_san_pham",don_gia_vnd:"don_gia_vnd",ghi_chu:"ghi_chu"};return n[r]||r}
async function fetchAll(t){const r=await fetch(t,{cache:"no-store"});if(!r.ok)throw new Error("HTTP "+r.status);const n=await r.text(),e=parseCSV(n),a=e[0].map(mapHeaderVN);return e.slice(1).filter(t=>t.some(t=>(t||"").trim().length)).map(t=>{const r={};return a.forEach((n,e)=>r[n]=(t[e]||"").trim()),r})}
function fmtPrice(t){const r=(t||"").toString().replace(/[.,]/g,""),n=parseFloat(r);return!isNaN(n)&&n>0?n.toLocaleString("vi-VN"):"—"}
function badge(t){if(!t)return"";const r=t.toLowerCase();return r.includes("hết")?`<span class='pill bad'>${t}</span>`:r.includes("còn")?`<span class='pill ok'>${t}</span>`:`<span class='pill blue'>${t}</span>`}
const CATS=["AirPods","iPad","iPhone","Pencil"];
function renderBoard(t,r){const n=document.getElementById(`board-${t}`),e=n.querySelector("tbody"),a={};r.forEach(t=>{const r=(t.dong_san_pham||"Khác").trim();a[r]||(a[r]=[]),a[r].push(t)});const o=Object.keys(a).sort((t,r)=>t.localeCompare(r,"vi",{sensitivity:"base"}));let i="";o.forEach(t=>{i+=`<tr class='groupname'><td colspan='3'>${t}</td></tr>`,a[t].forEach(t=>{i+=`<tr><td>${t.ten_san_pham||""}</td><td class='price'>${fmtPrice(t.don_gia_vnd)}</td><td>${badge(t.ghi_chu)}</td></tr>`})}),e.innerHTML=i}
async function boot(){const t=new Date;document.querySelector(".today").textContent=`${String(t.getDate()).padStart(2,"0")}/${String(t.getMonth()+1).padStart(2,"0")}/${t.getFullYear()}`;try{const t=await fetchAll(URL_ALL);CATS.forEach(r=>renderBoard(r,t.filter(t=>(t.danh_muc||"").toLowerCase()==r.toLowerCase())))}catch(t){console.error(t)}}
window.addEventListener("DOMContentLoaded",boot);
</script>
</head>
<body>
  <header class="wrap">
    <div class="title">Cái tiệm bán táo <span class="subtitle-small">by Tina House</span></div>
    <div class="subtitle">Bảng giá • Cập nhật: <span class="today"></span></div>
  </header>

  <main class="wrap">
    <div class="boards">
      <div class="card" id="board-AirPods">
        <div class="titlebar">AirPods</div>
        <div class="table-wrap"><table><thead><tr><th>Sản phẩm</th><th>Đơn giá (VND)</th><th>Ghi chú</th></tr></thead><tbody></tbody></table></div>
      </div>
      <div class="card" id="board-iPad">
        <div class="titlebar">iPad</div>
        <div class="table-wrap"><table><thead><tr><th>Sản phẩm</th><th>Đơn giá (VND)</th><th>Ghi chú</th></tr></thead><tbody></tbody></table></div>
      </div>
      <div class="card" id="board-iPhone">
        <div class="titlebar">iPhone</div>
        <div class="table-wrap"><table><thead><tr><th>Sản phẩm</th><th>Đơn giá (VND)</th><th>Ghi chú</th></tr></thead><tbody></tbody></table></div>
      </div>
      <div class="card" id="board-Pencil">
        <div class="titlebar">Pencil</div>
        <div class="table-wrap"><table><thead><tr><th>Sản phẩm</th><th>Đơn giá (VND)</th><th>Ghi chú</th></tr></thead><tbody></tbody></table></div>
      </div>
    </div>
  </main>
</body>
</html>
